name: ğŸš€ Simple Auto-Update

on:
  schedule:
    - cron: '0 9 * * *'  # Daily at 9 AM UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: â¬‡ï¸ Checkout
        uses: actions/checkout@v4
        
      - name: â° Update Timestamp
        run: |
          # Remove old timestamp
          sed -i '/ğŸ”„ Last updated:/d' README.md
          
          # Add new timestamp at top
          TIMESTAMP="ğŸ”„ **Last updated:** $(date '+%A, %B %d, %Y at %H:%M:%S UTC')"
          sed -i "1i $TIMESTAMP\n" README.md
          
      - name: ğŸ“Š Update Stats Section
        run: |
          # Create updated stats section
          cat > stats.md << EOF
          ## ğŸ“ˆ GitHub Statistics
          
          ![GitHub Stats](https://github-readme-stats.vercel.app/api?username=codes.by.Survive&show_icons=true&theme=radical&hide_border=true)
          
          ![Top Languages](https://github-readme-stats.vercel.app/api/top-langs/?username=codes.by.Survive&layout=compact&theme=radical&hide_border=true)
          
          ![GitHub Streak](https://streak-stats.demolab.com/?user=codes.by.Survive&theme=radical&hide_border=true)
          
          ![Profile Views](https://komarev.com/ghpvc/?username=codes.by.Survive&color=blue&label=Profile+Views)
          EOF
          
          # Replace stats section in README
          if grep -q "## ğŸ“ˆ GitHub Statistics" README.md; then
            sed -i '/## ğŸ“ˆ GitHub Statistics/,/## ğŸ› ï¸ Tech Stack/{//!d}' README.md
            sed -i '/## ğŸ“ˆ GitHub Statistics/r stats.md' README.md
          fi
          
      - name: ğŸ“¤ Push Changes
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "ğŸ“… Auto-update: $(date)" || echo "No changes to commit"
          git push
